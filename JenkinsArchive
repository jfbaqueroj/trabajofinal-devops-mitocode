pipeline {
	agent any
		
	stages{

		stage('Archivar el JAR') {

		 agent{
		   docker{image 'maven:3.6.3-jdk-11-slim'}	
		    }
		    steps {
			sh 'pwd'
            sh 'ls -la'
            sh 'mvn -B -e -C -T 1C org.apache.maven.plugins:maven-dependency-plugin:3.0.2:go-offline'
            sh 'echo "ejecucion de maven completa. Ubicacion actual: "'                
            sh 'pwd'
            sh 'mvn clean package'
            sh 'echo "Ubicacion ACTUAL: "'
            sh 'pwd'
            sh 'echo "CAMBIANDO A TARGET: "'
         	dir("target") {

    			sh 'pwd'
    			sh 'ls' 
			}
            sh 'echo "Fin del  step"'                        
            }
		}
	
	}
	post {
        always {
        	
            archiveArtifacts artifacts: '*.jar'
        }
    }
}